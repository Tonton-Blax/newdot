<script>var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
import { Graphics } from '@pixi/graphics';
;
import { getContext, onMount, tick } from 'svelte';
import Container from './Container.svelte';
import { shouldApplyProps } from './util';
// Container props
export let height = undefined;
export let width = undefined;
export let sortableChildren = undefined;
export let interactiveChildren = undefined;
// DisplayObject props
export let accessible = undefined;
export let accessibleChildren = true;
export let accessibleHint = undefined;
export let accessiblePointerEvents = 'auto';
export let accessibleTitle = undefined;
export let accessibleType = undefined;
export let alpha = undefined;
export let angle = undefined;
export let buttonMode = undefined;
export let cacheAsBitmap = undefined;
export let cursor = undefined;
export let filterArea = undefined;
export let filters = undefined;
export let hitArea = undefined;
export let interactive = undefined;
export let mask = undefined;
export let name = undefined;
export let pivot = undefined;
export let position = undefined;
export let renderable = undefined;
export let rotation = undefined;
export let scale = undefined;
export let skew = undefined;
export let transform = undefined;
export let visible = undefined;
export let x = undefined;
export let y = undefined;
export let zIndex = undefined;
// Graphics props
export let blendMode = undefined;
export let pluginName = undefined;
export let state = undefined;
export let tint = undefined;
/**
 * @type { (graphics: PIXI.Graphics) => any} Call your draw functions here
 */
export let draw;
/** @type {PIXI.Graphics} PIXI.Graphics instance to render */
export let instance = new Graphics();
const app = getContext('pixi/app');
$: shouldApplyProps(blendMode) && (instance.blendMode = blendMode);
$: shouldApplyProps(pluginName) && (instance.pluginName = pluginName);
$: shouldApplyProps(state) && (instance.state = state);
$: shouldApplyProps(tint) && (instance.tint = tint);
// because Graphics is not immutable, we can call draw whenever it changes
$: draw(instance);
onMount(() => {
    function updateProps() {
        return __awaiter(this, void 0, void 0, function* () {
            yield tick();
            // Graphics is not an immutable component
            // so we need to compare values before re-assigning
            if (blendMode !== instance.blendMode) {
                blendMode = instance.blendMode;
            }
            if (pluginName !== instance.pluginName) {
                pluginName = instance.pluginName;
            }
            if (state !== instance.state) {
                state = instance.state;
            }
            if (tint !== instance.tint) {
                tint = instance.tint;
            }
        });
    }
    app.ticker.add(updateProps);
    return () => app.ticker.remove(updateProps);
});
</script>

<Container
  bind:instance
  bind:accessible
  bind:accessibleChildren
  bind:accessibleHint
  bind:accessiblePointerEvents
  bind:accessibleTitle
  bind:accessibleType
  bind:alpha
  bind:angle
  bind:buttonMode
  bind:cacheAsBitmap
  bind:cursor
  bind:filterArea
  bind:filters
  bind:hitArea
  bind:interactive
  bind:mask
  bind:name
  bind:pivot
  bind:position
  bind:renderable
  bind:rotation
  bind:scale
  bind:skew
  bind:transform
  bind:visible
  bind:x
  bind:y
  bind:zIndex
  bind:height
  bind:width
  bind:interactiveChildren
  bind:sortableChildren>
  <slot />
</Container>
