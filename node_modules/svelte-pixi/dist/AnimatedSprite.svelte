<script>var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
;
import { AnimatedSprite } from '@pixi/sprite-animated';
import { createEventDispatcher, getContext, onMount, tick } from 'svelte';
import Sprite from './Sprite.svelte';
import { shouldApplyProps, warning } from './util';
// Sprite props
export let anchor = undefined;
export let blendMode = undefined;
export let pluginName = undefined;
export let roundPixels = undefined;
export let texture = undefined;
export let tint = undefined;
// Container props
export let height = undefined;
export let width = undefined;
export let sortableChildren = undefined;
export let interactiveChildren = undefined;
// DisplayObject props
export let accessible = undefined;
export let accessibleChildren = true;
export let accessibleHint = undefined;
export let accessiblePointerEvents = 'auto';
export let accessibleTitle = undefined;
export let accessibleType = undefined;
export let alpha = undefined;
export let angle = undefined;
export let buttonMode = undefined;
export let cacheAsBitmap = undefined;
export let cursor = undefined;
export let filterArea = undefined;
export let filters = undefined;
export let hitArea = undefined;
export let interactive = undefined;
export let mask = undefined;
export let name = undefined;
export let pivot = undefined;
export let position = undefined;
export let renderable = undefined;
export let rotation = undefined;
export let scale = undefined;
export let skew = undefined;
export let transform = undefined;
export let visible = undefined;
export let x = undefined;
export let y = undefined;
export let zIndex = undefined;
// AnimatedSprite props
export let autoUpdate = undefined;
export let animationSpeed = undefined;
export let playing = true;
export let textures;
/** @type {PIXI.AnimatedSprite} PIXI.AnimatedSprite instance to render */
export let instance = new AnimatedSprite(textures, autoUpdate);
const app = getContext('pixi/app');
const dispatch = createEventDispatcher();
$: shouldApplyProps(autoUpdate) && (instance.autoUpdate = autoUpdate);
$: shouldApplyProps(playing) && (playing ? instance.play() : instance.stop());
$: if (shouldApplyProps(textures)) {
    instance.textures = textures;
    if (playing) {
        instance.play();
    }
}
$: shouldApplyProps(animationSpeed) &&
    (instance.animationSpeed = animationSpeed);
onMount(() => {
    instance.onComplete = () => dispatch('complete');
    instance.onFrameChange = () => dispatch('frameChange');
    instance.onLoop = () => dispatch('loop');
    function updateProps() {
        return __awaiter(this, void 0, void 0, function* () {
            yield tick();
            autoUpdate = instance.autoUpdate;
            playing = instance.playing;
            textures = instance.textures;
            animationSpeed = instance.animationSpeed;
        });
    }
    app.ticker.add(updateProps);
    return () => app.ticker.remove(updateProps);
});
</script>

<svelte:options immutable />
<Sprite
  bind:instance
  bind:accessible
  bind:accessibleChildren
  bind:accessibleHint
  bind:accessiblePointerEvents
  bind:accessibleTitle
  bind:accessibleType
  bind:alpha
  bind:anchor
  bind:angle
  bind:blendMode
  bind:buttonMode
  bind:cacheAsBitmap
  bind:cursor
  bind:filterArea
  bind:filters
  bind:height
  bind:hitArea
  bind:interactive
  bind:interactiveChildren
  bind:mask
  bind:name
  bind:pivot
  bind:pluginName
  bind:position
  bind:renderable
  bind:rotation
  bind:roundPixels
  bind:scale
  bind:skew
  bind:sortableChildren
  bind:texture
  bind:tint
  bind:transform
  bind:visible
  bind:width
  bind:x
  bind:y
  bind:zIndex>
  <slot />
</Sprite>
